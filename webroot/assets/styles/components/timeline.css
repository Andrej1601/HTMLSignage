/**
 * Component: Timeline (Hero)
 * Hero-Timeline für Aufguss-Übersicht mit Thumbnails
 */

@layer components {
  /* ========================================
     Hero Container
     ======================================== */
  .container.hero {
    align-items: stretch;
  }

  .hero-headings {
    width: 100%;
    margin: 0 0 calc(18px * var(--vwScale, 1));
  }

  .hero-body {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: calc(18px * var(--vwScale, 1));
    flex: 1 1 auto;
    min-height: 0;
  }

  /* ========================================
     Timeline List
     ======================================== */
  .hero-timeline-list {
    display: flex;
    flex-direction: column;
    gap: calc(16px * var(--vwScale, 1));
    width: 100%;
    overflow-x: hidden;
    flex: 1 1 auto;
    min-height: 0;
  }

  .hero-timeline-list.is-scrollable {
    overflow-y: auto;
    scrollbar-width: none;
    overscroll-behavior: contain;
  }

  .hero-timeline-list.is-scrollable::-webkit-scrollbar {
    display: none;
  }

  /* ========================================
     Hero Timeline
     ======================================== */
  .hero-timeline {
    --heroTimelineThumb: calc(120px * var(--vwScale, 1));
    --heroTimelineRadius: calc(18px * var(--vwScale, 1));
    --heroTimelineGap: calc(16px * var(--vwScale, 1));
  }

  /* Timeline Item (Card) */
  .hero-timeline .timeline-item {
    flex: 0 0 auto;
    position: relative;
    padding: calc(24px * var(--vwScale, 1));
    border-radius: var(--tileRadiusPx, calc(22px * var(--vwScale, 1)));
    border: calc(var(--tileBorderW, 2px) * var(--vwScale, 1)) solid var(--spa-border-medium);
    background: var(--spa-primary);
    color: var(--spa-text-primary);
    box-shadow: 0 20px 44px rgba(0, 0, 0, 0.22);
    overflow: hidden;
    isolation: isolate;
    --hero-index: 0;
    opacity: 0;
    transform: translateY(18px) scale(0.97);
    animation: heroItemFade var(--heroTimelineItemMs, 500ms) cubic-bezier(0.22, 0.61, 0.36, 1) forwards;
    animation-delay: calc(var(--heroTimelineItemDelay, 140ms) * var(--hero-index, 0));
  }

  .hero-timeline .timeline-item::before {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(0, 0, 0, 0.38) 100%);
    opacity: 0.85;
    pointer-events: none;
  }

  .hero-timeline .timeline-item > * {
    position: relative;
    z-index: 1;
  }

  .hero-timeline .timeline-item.is-active {
    box-shadow: 0 26px 60px rgba(0, 0, 0, 0.28);
  }

  /* ========================================
     Timeline Time
     ======================================== */
  .hero-timeline .timeline-time {
    font-weight: 700;
    font-size: calc(32px * var(--scale, 1));
    margin: 0 0 calc(8px * var(--vwScale, 1));
  }

  .hero-timeline .timeline-details {
    display: flex;
    flex-direction: column;
    gap: calc(12px * var(--vwScale, 1));
  }

  /* ========================================
     Timeline Entry (Event Card)
     ======================================== */
  .hero-timeline .timeline-entry {
    position: relative;
    display: grid;
    grid-template-columns: minmax(0, var(--heroTimelineThumb)) 1fr;
    align-items: flex-start;
    gap: var(--heroTimelineGap);
    padding: calc(16px * var(--vwScale, 1));
    border-radius: var(--heroTimelineRadius);
    background: rgba(255, 255, 255, 0.11);
    border: 1px solid rgba(255, 255, 255, 0.08);
    font-size: calc(22px * var(--scale, 1));
    box-shadow: 0 14px 32px rgba(0, 0, 0, 0.22);
    transition: transform 0.4s cubic-bezier(0.22, 0.61, 0.36, 1),
                box-shadow 0.4s cubic-bezier(0.22, 0.61, 0.36, 1);
  }

  .hero-timeline .timeline-entry.highlight {
    background: color-mix(in srgb, var(--spa-accent-light) 42%, transparent);
    border-color: color-mix(in srgb, var(--spa-accent) 70%, transparent);
    color: var(--spa-text-primary);
    box-shadow: 0 18px 40px rgba(0, 0, 0, 0.28);
  }

  /* ========================================
     Timeline Entry Thumbnail
     ======================================== */
  .hero-timeline .timeline-entry-thumb {
    position: relative;
    width: 100%;
    aspect-ratio: 1 / 1;
    border-radius: calc(var(--heroTimelineRadius) * 0.82);
    background: rgba(0, 0, 0, 0.28);
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.06);
  }

  .hero-timeline .timeline-entry-thumb.is-empty {
    background: rgba(0, 0, 0, 0.18);
  }

  .hero-timeline .timeline-entry.highlight .timeline-entry-thumb {
    box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--spa-accent) 70%, transparent);
  }

  .hero-timeline .timeline-item.is-active .timeline-entry.highlight .timeline-entry-thumb {
    box-shadow: inset 0 0 0 2px color-mix(in srgb, var(--spa-accent) 70%, transparent);
  }

  .hero-timeline .timeline-entry-thumb-image {
    position: absolute;
    inset: 0;
    background-size: cover;
    background-position: center;
    transform: scale(1.02);
    transition: transform 0.6s cubic-bezier(0.22, 0.61, 0.36, 1);
  }

  .hero-timeline .timeline-entry:hover .timeline-entry-thumb-image {
    transform: scale(1.08);
  }

  .hero-timeline .timeline-entry-thumb-fallback {
    font-size: calc(42px * var(--scale, 1));
    font-weight: 700;
    letter-spacing: 0.06em;
    color: color-mix(in srgb, var(--spa-text-primary) 88%, rgba(0, 0, 0, 0.2));
  }

  /* ========================================
     Timeline Entry Content
     ======================================== */
  .hero-timeline .timeline-entry-content {
    display: flex;
    flex-direction: column;
    gap: calc(8px * var(--vwScale, 1));
    min-width: 0;
  }

  .hero-timeline .timeline-entry-header {
    display: flex;
    flex-wrap: wrap;
    gap: calc(8px * var(--vwScale, 1));
    align-items: baseline;
    min-width: 0;
  }

  .hero-timeline .timeline-entry-header > * {
    min-width: 0;
  }

  .hero-timeline .timeline-entry .timeline-sauna {
    font-weight: 700;
    letter-spacing: 0.02em;
    color: var(--spa-text-primary);
  }

  .hero-timeline .timeline-entry .timeline-title {
    font-weight: 600;
    color: var(--spa-text-primary);
  }

  .hero-timeline .timeline-entry .timeline-detail {
    opacity: 0.86;
    font-size: calc(18px * var(--scale, 1));
    line-height: 1.35;
  }

  /* ========================================
     Timeline Countdown
     ======================================== */
  .hero-timeline .timeline-countdown {
    display: flex;
    flex-direction: column;
    gap: calc(6px * var(--vwScale, 1));
    margin-top: calc(6px * var(--vwScale, 1));
  }

  .hero-timeline .timeline-countdown-value {
    font-size: calc(34px * var(--scale, 1));
    font-weight: 700;
    color: var(--spa-text-primary);
  }

  .hero-timeline .timeline-countdown-label {
    text-transform: uppercase;
    letter-spacing: 0.12em;
    font-size: calc(16px * var(--scale, 1));
    color: color-mix(in srgb, var(--spa-text-primary) 65%, rgba(0, 0, 0, 0.35));
  }

  .hero-timeline .timeline-item.is-live .timeline-countdown-value {
    color: var(--spa-accent);
  }

  .hero-timeline .timeline-item.is-live .timeline-countdown-label {
    color: var(--spa-accent);
  }

  .hero-timeline .timeline-item.is-soon:not(.is-live) .timeline-countdown-value {
    color: var(--spa-accent);
  }

  .hero-timeline .timeline-item.is-soon:not(.is-live) .timeline-countdown-label {
    color: color-mix(in srgb, var(--spa-accent) 70%, rgba(0, 0, 0, 0.25));
  }

  /* ========================================
     Timeline Highlight States
     ======================================== */
  .hero-timeline .timeline-entry.highlight .timeline-sauna,
  .hero-timeline .timeline-entry.highlight .timeline-title {
    color: var(--spa-accent);
  }

  .hero-timeline .timeline-item.is-active .timeline-entry.highlight .timeline-sauna,
  .hero-timeline .timeline-item.is-active .timeline-entry.highlight .timeline-title {
    color: var(--spa-accent-warm);
  }

  .hero-timeline .timeline-entry.highlight .timeline-detail {
    color: color-mix(in srgb, var(--spa-accent) 75%, var(--spa-text-primary) 25%);
  }

  .hero-timeline .timeline-item.is-active .timeline-entry.highlight .timeline-detail {
    color: color-mix(in srgb, var(--spa-accent-warm) 80%, var(--spa-text-primary) 20%);
  }

  /* ========================================
     Timeline Badges
     ======================================== */
  .hero-timeline .timeline-entry-badges {
    --tileChipGapPx: calc(8px * var(--vwScale, 1));
    margin-top: calc(4px * var(--vwScale, 1));
  }

  .hero-timeline .timeline-entry-badges .badge {
    display: inline-flex;
    align-items: center;
    gap: 0.45em;
    padding: 0.35em 1em;
    border-radius: 999px;
    background: rgba(0, 0, 0, 0.35);
    color: var(--spa-text-primary);
    font-size: calc(18px * var(--scale, 1));
    font-weight: 600;
    letter-spacing: 0.06em;
    box-shadow: none;
  }

  .hero-timeline .timeline-entry.highlight .timeline-entry-badges .badge {
    background: color-mix(in srgb, var(--spa-accent) 50%, rgba(0, 0, 0, 0.15));
    color: var(--spa-text-primary);
  }

  .hero-timeline .timeline-item.is-active .timeline-entry.highlight .timeline-entry-badges .badge {
    background: color-mix(in srgb, var(--spa-accent-warm) 60%, transparent);
    color: var(--spa-text-primary);
  }

  /* ========================================
     Timeline Progress Bar
     ======================================== */
  .hero-timeline .timeline-bar {
    position: relative;
    height: 6px;
    margin: calc(14px * var(--vwScale, 1)) 0 0;
    border-radius: 999px;
    background: rgba(255, 255, 255, 0.22);
    overflow: hidden;
  }

  .hero-timeline .timeline-progress {
    position: absolute;
    inset: 0;
    background: var(--spa-accent);
    transform-origin: left;
    transform: scaleX(0);
    animation: heroBarFill calc(var(--heroTimelineFillMs, 8000ms) * var(--hero-duration-ratio, 1))
                         cubic-bezier(0.22, 0.61, 0.36, 1) forwards;
    animation-delay: calc(var(--heroTimelineDelayMs, 400ms) + var(--heroTimelineItemDelay, 140ms) * var(--hero-index, 0));
  }

  .hero-timeline .timeline-item.is-active .timeline-progress {
    background: var(--spa-accent);
  }

  .hero-timeline .timeline-item.is-active .timeline-entry {
    border-color: color-mix(in srgb, var(--spa-accent) 45%, transparent);
    box-shadow: 0 20px 44px rgba(0, 0, 0, 0.32);
  }

  .hero-timeline .timeline-item.is-active .timeline-entry.highlight {
    background: color-mix(in srgb, var(--spa-accent) 58%, var(--spa-accent-warm) 42%);
    color: var(--spa-text-primary);
    border-color: color-mix(in srgb, var(--spa-accent) 68%, transparent);
  }

  /* ========================================
     Reduced Motion Support
     ======================================== */
  @media (prefers-reduced-motion: reduce) {
    .hero-timeline .timeline-item {
      animation-duration: 0.01ms !important;
      animation-delay: 0ms !important;
      transform: none !important;
      opacity: 1 !important;
    }

    .hero-timeline .timeline-progress {
      animation: none !important;
      transform: scaleX(1) !important;
    }
  }

  /* ========================================
     Animations
     ======================================== */
  @keyframes heroItemFade {
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  @keyframes heroBarFill {
    to {
      transform: scaleX(1);
    }
  }
}

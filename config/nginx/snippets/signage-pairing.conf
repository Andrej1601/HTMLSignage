# /etc/nginx/snippets/signage-pairing.conf
# Pairing/Device-API â€“ ohne Auth, gleicher Origin (auf :80 und :8888 nutzbar)

location = /pair/begin {
  auth_basic off;
  add_header X-Pair "begin" always;
  include fastcgi_params;
  fastcgi_param SCRIPT_FILENAME /var/www/signage/admin/api/devices_begin.php;
  fastcgi_param SCRIPT_NAME     /admin/api/devices_begin.php;
  fastcgi_pass unix:__PHP_SOCK__;
}

location = /pair/poll {
  auth_basic off;
  add_header X-Pair "poll" always;
  include fastcgi_params;
  fastcgi_param SCRIPT_FILENAME /var/www/signage/admin/api/devices_poll.php;
  fastcgi_param SCRIPT_NAME     /admin/api/devices_poll.php;
  fastcgi_pass unix:__PHP_SOCK__;
}

location = /pair/touch {
  auth_basic off;
  add_header X-Pair "touch" always;
  include fastcgi_params;
  fastcgi_param SCRIPT_FILENAME /var/www/signage/admin/api/devices_touch.php;
  fastcgi_param SCRIPT_NAME     /admin/api/devices_touch.php;
  fastcgi_pass unix:__PHP_SOCK__;
}

location = /pair/resolve {
  auth_basic off;
  add_header X-Pair "resolve" always;
  include fastcgi_params;
  fastcgi_param SCRIPT_FILENAME /var/www/signage/admin/api/device_resolve.php;
  fastcgi_param SCRIPT_NAME     /admin/api/device_resolve.php;
  fastcgi_pass unix:__PHP_SOCK__;
}

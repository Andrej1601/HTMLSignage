server {
  listen __PUBLIC_PORT__ default_server;
  listen [::]:__PUBLIC_PORT__ default_server;
  server_name _;

  return 301 https://$host$request_uri;
}

server {
  listen 443 ssl default_server;
  listen [::]:443 ssl default_server;
  server_name _;
  root /var/www/signage;

  ssl_certificate     /etc/nginx/ssl/signage-slideshow.crt;
  ssl_certificate_key /etc/nginx/ssl/signage-slideshow.key;

  add_header Cache-Control "no-store" always;
  add_header X-Served-By signage-slideshow always;

  index index.html;

  location ^~ /assets/ { try_files $uri =404; }
  location ^~ /data/   {
    add_header Cache-Control "no-store, must-revalidate" always;
    try_files $uri =404;
  }

  # Pairing/Device-API â€“ ohne Auth, gleicher Origin
  include /etc/nginx/snippets/signage-pairing.conf;
}

